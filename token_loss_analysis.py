#!/usr/bin/env python3
"""
–ê–Ω–∞–ª–∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ—Ç–µ—Ä—å —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ WebSocket
"""

import time
import datetime

def analyze_token_loss_risk():
    """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏ –ø–æ—Ç–µ—Ä–∏ —Ç–æ–∫–µ–Ω–æ–≤"""
    print("üìä –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í –ü–û–¢–ï–†–ò –¢–û–ö–ï–ù–û–í\n")
    print("=" * 60)
    
    # –î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    scenarios = [
        {
            "name": "–° –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è)",
            "reconnect_delay": 5,  # 5 —Å–µ–∫—É–Ω–¥ –∑–∞–¥–µ—Ä–∂–∫–∞
            "detection_delay": 3,  # 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞
            "total_delay": 8
        },
        {
            "name": "–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)", 
            "reconnect_delay": 0,  # –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
            "detection_delay": 3,  # 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞
            "total_delay": 3
        }
    ]
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ pump.fun
    tokens_per_minute = 15  # –ø—Ä–∏–º–µ—Ä–Ω–æ 15 –Ω–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –º–∏–Ω—É—Ç—É –≤ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è
    
    for scenario in scenarios:
        print(f"\nüî∏ {scenario['name']}")
        print("-" * 50)
        
        downtime = scenario['total_delay']
        potential_loss = (tokens_per_minute / 60) * downtime
        
        print(f"üìä –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è: {downtime} —Å–µ–∫—É–Ω–¥")
        print(f"‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è: ~{potential_loss:.1f} —Ç–æ–∫–µ–Ω–æ–≤")
        print(f"üìà –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ (%): {(potential_loss / tokens_per_minute * 60) * 100:.1f}%")
        
        # –†–∞—Å—á–µ—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç–æ—Ç —Ä–∞–∑—Ä—ã–≤–æ–≤
        print(f"\nüìã –ü—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤:")
        frequencies = [
            ("1 —Ä–∞–∑ –≤ —á–∞—Å", 1/60),
            ("1 —Ä–∞–∑ –≤ 30 –º–∏–Ω—É—Ç", 2/60), 
            ("1 —Ä–∞–∑ –≤ 10 –º–∏–Ω—É—Ç", 6/60),
            ("1 —Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç", 12/60)
        ]
        
        for freq_name, freq_per_min in frequencies:
            daily_disconnects = freq_per_min * 60 * 24  # —Ä–∞–∑—Ä—ã–≤–æ–≤ –≤ –¥–µ–Ω—å
            daily_loss = daily_disconnects * potential_loss
            print(f"   ‚Ä¢ {freq_name}: ~{daily_loss:.1f} —Ç–æ–∫–µ–Ω–æ–≤/–¥–µ–Ω—å")
    
    print(f"\n" + "=" * 60)
    print("üéØ –í–´–í–û–î–´:")
    print("‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç –ø–æ—Ç–µ—Ä–∏ –≤ 2.67 —Ä–∞–∑–∞")
    print("‚úÖ –ö—Ä–∏—Ç–∏—á–Ω—ã –ø–µ—Ä–≤—ã–µ —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ —Ä–∞–∑—Ä—ã–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")
    print("‚ö†Ô∏è –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä—å –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–∞—Ö –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ")
    print("üí° WebSocket - –ø–æ—Ç–æ–∫–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ—Ç")
    
    print(f"\nüõ°Ô∏è –°–ü–û–°–û–ë–´ –ú–ò–ù–ò–ú–ò–ó–ê–¶–ò–ò –†–ò–°–ö–û–í:")
    print("1. ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)")
    print("2. üîÑ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ")
    print("3. üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")
    print("4. üéØ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (–º–µ–Ω—å—à–µ —Å–ø–∞–º–∞ = –º–µ–Ω—å—à–µ –ø–æ—Ç–µ—Ä—å)")
    print("5. üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤")
    
    print(f"\n‚öñÔ∏è –ö–û–ú–ü–†–û–ú–ò–°–°–´:")
    print("‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VS –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä")
    print("‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ—Å—Ç—å VS –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å")
    print("‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏ VS –†–µ—Å—É—Ä—Å—ã")
    
    # –°–∏–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
    print(f"\nüî¨ –†–ï–ê–õ–¨–ù–´–ô –ü–†–ò–ú–ï–† (24 —á–∞—Å–∞):")
    print("-" * 30)
    
    daily_tokens = tokens_per_minute * 60 * 24  # —Ç–æ–∫–µ–Ω–æ–≤ –≤ –¥–µ–Ω—å
    connection_issues_per_day = 10  # –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º 10 —Ä–∞–∑—Ä—ã–≤–æ–≤ –≤ –¥–µ–Ω—å
    
    old_system_loss = connection_issues_per_day * 8 * (tokens_per_minute / 60)
    new_system_loss = connection_issues_per_day * 3 * (tokens_per_minute / 60)
    
    print(f"üìä –í—Å–µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –¥–µ–Ω—å: ~{daily_tokens}")
    print(f"üîå –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤: {connection_issues_per_day}")
    print(f"‚ùå –ü–æ—Ç–µ—Ä–∏ (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞): ~{old_system_loss:.1f} —Ç–æ–∫–µ–Ω–æ–≤ ({(old_system_loss/daily_tokens)*100:.2f}%)")
    print(f"‚úÖ –ü–æ—Ç–µ—Ä–∏ (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞): ~{new_system_loss:.1f} —Ç–æ–∫–µ–Ω–æ–≤ ({(new_system_loss/daily_tokens)*100:.2f}%)")
    print(f"üéØ –£–ª—É—á—à–µ–Ω–∏–µ: {old_system_loss - new_system_loss:.1f} —Ç–æ–∫–µ–Ω–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!")

if __name__ == "__main__":
    analyze_token_loss_risk() 