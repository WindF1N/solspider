# üéØ –ü–û–õ–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï: test_filter.py ‚Üî bundle_analyzer.py

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –ü–†–û–í–ï–†–ö–ò

**test_filter.py –ü–û–õ–ù–û–°–¢–¨–Æ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ bundle_analyzer.py** - –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –±–µ–∑ —É–ø—Ä–æ—â–µ–Ω–∏–π!

```
üìä –ö–õ–Æ–ß–ï–í–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø ACTIVITY –§–ò–õ–¨–¢–†–ê–¶–ò–ò: 9/9 ‚úÖ
üìã –ö–û–†–†–ï–õ–Ø–¶–ò–û–ù–ù–´–ï –ü–†–û–í–ï–†–ö–ò: –í–°–ï –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø ‚úÖ  
üî¨ –õ–û–ì–ò–ö–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò: –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –û–†–ò–ì–ò–ù–ê–õ–£ ‚úÖ
üìÑ –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï: –†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ
‚ö° –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê: –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –°–ö–û–†–û–°–¢–¨ ‚úÖ
```

---

## üîß –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

### üìà **–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ê–Ω–∞–ª–∏–∑—ã**
- ‚úÖ `check_snipers_bundlers_correlation()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ —Å–Ω–∞–π–ø–µ—Ä–æ–≤ –∏ –±–∞–Ω–¥–ª–µ—Ä–æ–≤
- ‚úÖ `check_snipers_insiders_correlation()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ —Å–Ω–∞–π–ø–µ—Ä–æ–≤ –∏ –∏–Ω—Å–∞–π–¥–µ—Ä–æ–≤  
- ‚úÖ `check_bundlers_snipers_exit_correlation()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞ –±–∞–Ω–¥–ª–µ—Ä–æ–≤ –∏ —Å–Ω–∞–π–ø–µ—Ä–æ–≤
- ‚úÖ `check_holders_correlation()` - –ê–Ω–∞–ª–∏–∑ –º–∞—Å—Å–æ–≤—ã—Ö –ø—Ä–æ–¥–∞–∂ —Ä–∞–Ω–Ω–∏—Ö —Ö–æ–ª–¥–µ—Ä–æ–≤

### üö® **–ê–Ω–∞–ª–∏–∑ –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤**
- ‚úÖ `check_rapid_exit()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã—Ö–æ–¥–∞ —Å —Ä—ã–Ω–∫–∞
- ‚úÖ `analyze_holder_stability()` - –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–ø-—Ö–æ–ª–¥–µ—Ä–æ–≤  
- ‚úÖ `analyze_early_vs_current_holders()` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–Ω–Ω–∏—Ö –∏ —Ç–µ–∫—É—â–∏—Ö —Ö–æ–ª–¥–µ—Ä–æ–≤
- ‚úÖ `is_suspicious_pattern()` - –û–±—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### üßÆ **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏**
- ‚úÖ `_calculate_correlation()` - –†–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏

---

## üìã –¢–û–ß–ù–´–ï activity_conditions –ò–ó bundle_analyzer.py

```python
activity_conditions = {
    'time_ok': True,  # –í—Ä–µ–º—è —Å —Å–æ–∑–¥–∞–Ω–∏—è —Ä—ã–Ω–∫–∞ < 300 —Å–µ–∫
    'holders_min': total_holders >= 30,  # –ú–∏–Ω–∏–º—É–º 30 —Ö–æ–ª–¥–µ—Ä–æ–≤
    'holders_max': total_holders <= 130,  # –ú–∞–∫—Å–∏–º—É–º 130 —Ö–æ–ª–¥–µ—Ä–æ–≤  
    'holders_never_dumped': max_holders <= 150,  # –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª–æ >150
    'max_holders_pcnt': 0 < max_holders_pcnt <= 7,  # % –≤–ª–∞–¥–µ–Ω–∏—è ‚â§7%
    'bundlers_ok': True,  # max_bundlers_after_dev_exit >= 5
    'bundlers_before_dev_ok': True,  # max_bundlers_before_dev_exit <= 60
    'dev_percent_ok': dev_percent <= 2,  # Dev –ø—Ä–æ—Ü–µ–Ω—Ç ‚â§2%
    
    # –°–õ–û–ñ–ù–´–ï –£–°–õ–û–í–ò–Ø –°–ù–ê–ô–ü–ï–†–û–í (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ bundle_analyzer.py)
    'snipers_ok': (
        snipers_count <= 20 and  # ‚â§20 —Å–Ω–∞–π–ø–µ—Ä–æ–≤
        (
            snipers_percent <= 3.5 or  # ‚â§3.5% –ò–õ–ò
            (
                any(float(m.get('snipersHoldingPcnt', 0) or 0) > 0 for m in metrics_history) and
                max(float(m.get('snipersHoldingPcnt', 0) or 0) 
                    for m in metrics_history 
                    if float(m.get('snipersHoldingPcnt', 0) or 0) > 0) > snipers_percent and
                snipers_percent <= 5.0 and  # ‚â§5% –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç
                check_rapid_exit('snipersHoldingPcnt', ratio=3, max_seconds=120)  # –° rapid exit
            )
        )
    ),
    
    # –°–õ–û–ñ–ù–´–ï –£–°–õ–û–í–ò–Ø –ò–ù–°–ê–ô–î–ï–†–û–í (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ bundle_analyzer.py)
    'insiders_ok': (
        insiders_percent <= 15 or  # ‚â§15% –ò–õ–ò
        (
            any(float(m.get('insidersHoldingPcnt', 0) or 0) > 0 for m in metrics_history) and
            max(float(m.get('insidersHoldingPcnt', 0) or 0) 
                for m in metrics_history 
                if float(m.get('insidersHoldingPcnt', 0) or 0) > 0) > insiders_percent and
            insiders_percent <= 22.0 and  # ‚â§22% –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç
            check_rapid_exit('insidersHoldingPcnt', ratio=3, max_seconds=120)  # –° rapid exit
        )
    ),
    
    'min_liquidity': liquidity >= 10000,  # ‚â•$10,000
    'holders_growth': growth['holders_growth'] >= 2900,  # ‚â•2900/–º–∏–Ω
    
    # –í–°–ï –ö–û–†–†–ï–õ–Ø–¶–ò–û–ù–ù–´–ï –ü–†–û–í–ï–†–ö–ò
    'can_notify': True,  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    'snipers_not_bundlers': check_snipers_bundlers_correlation(metrics_history),
    'snipers_not_insiders': check_snipers_insiders_correlation(metrics_history), 
    'bundlers_snipers_exit_not_correlated': check_bundlers_snipers_exit_correlation(metrics_history),
    'holders_not_correlated': await check_holders_correlation(metrics_history)
}
```

---

## üìÑ –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –í test_filter.log

### üéØ **–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–µ–π**:
```
‚úÖ ACTIVITY PASS - TOKEN: ABC123 | DECISION: WOULD_SEND | TYPE: ACTIVITY | HOLDERS: 85 | MCAP: $150,000 | LIQUIDITY: $25,000 | DEV: 1.2% | SNIPERS: 2.1% | INSIDERS: 8.5% | REASON: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º

‚ùå ACTIVITY REJECT - TOKEN: XYZ789 | DECISION: WOULD_REJECT | TYPE: ACTIVITY | HOLDERS: 25 | REASON: –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å–ª–æ–≤–∏—è–º activity —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  

‚ö´ BLACKLISTED - TOKEN: DEF456 | DECISION: BLACKLISTED | REASON: –¢–æ–∫–µ–Ω –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ "–≥–µ–Ω–∏–∞–ª—å–Ω—ã—Ö —Ä–∞–≥–æ–≤"
```

### üìä **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ª–æ–≥–∞**:
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫** —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–∫–µ–Ω—É —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **–ü—Ä–∏–º–µ—Ä—ã —Ç–æ–∫–µ–Ω–æ–≤** –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—à–ª–∏/–Ω–µ –ø—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é

---

## ‚ö° –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### üöÄ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –û–±—Ä–∞–±–æ—Ç–∫–∞**:
- **ProcessPoolExecutor** –Ω–∞ –≤—Å–µ—Ö —è–¥—Ä–∞—Ö CPU
- **–ë–∞—Ç—á–∏ –ø–æ 50+ —Ñ–∞–π–ª–æ–≤** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
- **Timeout 30 —Å–µ–∫** –Ω–∞ —Ç–æ–∫–µ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π
- **–ü—Ä–æ–≥—Ä–µ—Å—Å –∏ ETA** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üìà **–°–∫–æ—Ä–æ—Å—Ç—å**:
- **–í —Ä–∞–∑—ã –±—ã—Å—Ç—Ä–µ–µ** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–¢—ã—Å—è—á–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ –º–∏–Ω—É—Ç—ã** –≤–º–µ—Å—Ç–æ —á–∞—Å–æ–≤
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

---

## üéØ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

```bash
# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
python test_filter.py

# –î–µ–º–æ –Ω–∞ 20 —Ç–æ–∫–µ–Ω–∞—Ö
python test_with_logging.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è bundle_analyzer.py
python test_all_functions.py

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
cat test_filter.log
grep "‚úÖ ACTIVITY PASS" test_filter.log  # –¢–æ–ª—å–∫–æ –ø—Ä–æ—à–µ–¥—à–∏–µ
grep "‚ùå ACTIVITY REJECT" test_filter.log  # –¢–æ–ª—å–∫–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ
```

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**test_filter.py –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–£–ï–¢ –í–°–Æ –õ–û–ì–ò–ö–£ bundle_analyzer.py**:

- ‚úÖ **–í—Å–µ 9 –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π** –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ **–¢–æ—á–Ω—ã–µ activity_conditions** –±–µ–∑ —É–ø—Ä–æ—â–µ–Ω–∏–π  
- ‚úÖ **–°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è** –¥–ª—è —Å–Ω–∞–π–ø–µ—Ä–æ–≤ –∏ –∏–Ω—Å–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ **–ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- ‚úÖ **–ß–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫** "–≥–µ–Ω–∏–∞–ª—å–Ω—ã—Ö —Ä–∞–≥–æ–≤"
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º

**–ù–ï–¢ –£–ü–†–û–©–ï–ù–ò–ô! –ù–ï–¢ –ó–ê–ì–õ–£–®–ï–ö! –í–°–ï –ö–ê–ö –í –û–†–ò–ì–ò–ù–ê–õ–ï!** üéâ