# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò UnboundLocalError

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
UnboundLocalError: local variable 'e' referenced before assignment
```

**–ú–µ—Å—Ç–æ –æ—à–∏–±–∫–∏:** —Å—Ç—Ä–æ–∫–∞ 593 –≤ `pump_bot.py`
```python
if 'keepalive' in str(e).lower() or 'ping timeout' in str(e).lower():
```

## ‚ö†Ô∏è –ü—Ä–∏—á–∏–Ω–∞

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `e` –±—ã–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –±–ª–æ–∫–∞—Ö `except`, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –≤ –æ–±—â–µ–π –ª–æ–≥–∏–∫–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç—Ç–∏—Ö –±–ª–æ–∫–æ–≤.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ó–∞–º–µ–Ω–∏–ª–∏ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `e` –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `locals()`:

**–ë—ã–ª–æ:**
```python
if 'keepalive' in str(e).lower() or 'ping timeout' in str(e).lower():
```

**–°—Ç–∞–ª–æ:**
```python
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏ –¥–ª—è –ª–æ–≥–∏–∫–∏ –∑–∞–¥–µ—Ä–∂–∫–∏
error_str = str(locals().get('e', ''))
is_keepalive_error = 'keepalive' in error_str.lower() or 'ping timeout' in error_str.lower()

if is_keepalive_error:
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```
‚úÖ Keepalive timeout - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∑–∞–¥–µ—Ä–∂–∫–∞ 5.0—Å (–±—ã—Å—Ç—Ä–æ)
‚úÖ Ping timeout - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∑–∞–¥–µ—Ä–∂–∫–∞ 5.0—Å (–±—ã—Å—Ç—Ä–æ) 
‚úÖ Connection reset - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –æ—à–∏–±–∫–∞, –∑–∞–¥–µ—Ä–∂–∫–∞ 10.0—Å
‚úÖ –û–±—ã—á–Ω–∞—è –æ—à–∏–±–∫–∞ - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –æ—à–∏–±–∫–∞, –∑–∞–¥–µ—Ä–∂–∫–∞ 10.0—Å
‚úÖ –ü—É—Å—Ç–∞—è –æ—à–∏–±–∫–∞ - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –æ—à–∏–±–∫–∞, –∑–∞–¥–µ—Ä–∂–∫–∞ 10.0—Å
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –æ—à–∏–±–∫–∞ UnboundLocalError** - –±–æ—Ç –±–æ–ª—å—à–µ –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –¥–ª—è keepalive –æ—à–∏–±–æ–∫
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `e` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö

## üöÄ –°—Ç–∞—Ç—É—Å

**‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û** - –æ—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞, –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏:
- –ù–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ –∞–¥—Ä–µ—Å—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ Twitter
- –£–ª—É—á—à–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏

## üß™ –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
python test_reconnect_fix.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -c "import pump_bot"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
./start_bot.sh
``` 